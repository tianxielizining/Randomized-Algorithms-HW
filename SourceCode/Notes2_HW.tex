\section{Graphs with No Short Cycles}
\begin{definition}
An undirected graph $G = (V,E)$ contains a cycle of length $l$ if there are $l$ vertices $v_1,v_2,...,v_l$ such that all $l$ edges $\{v_1,v_2\},\{v_2,v_3\},...\{v_{lâˆ’1},v_l\},\{v_l,v_1\} \in E$ are present. The minimum length of a cycle is $3$.
\end{definition}
\noindent\textbf{Question.} Suppose a graph has no cycles of length $l$ or less. What is the maximum number of edges that it can have?

We will give a randomized algorithm and a deterministic algorithm in the following subsections. Both algorithms guarantee the number of edges.
\subsection{Preliminaries}
%The following lemmas and definition are useful for analysis.

\begin{lemma}[\textbf{linearity of expectation}]\label{linearity}
Suppose for each $1 \le i \le n$, $X_i$ is a random variable and $a_i$ is a real number. Then, $E[\sum_{i=1}^na_iX_i]=\sum_{i=1}^{n}a_iE[X_i]$.
\end{lemma}
\begin{lemma}[\textbf{Stirling's formula}\cite{stirling}]\label{Stirling}
 For $n=1,2,3,...$
\begin{align}
    \nonumber \sqrt{2\pi}n^{n+\frac{1}{2}}e^{-n}e^{\frac{1}{12n+1}}\textless n! \textless \sqrt{2\pi}n^{n+\frac{1}{2}}e^{-n}e^{\frac{1}{12n}} 
\end{align}
\end{lemma}
\begin{definition}[\textbf{Euler's number}\cite{e}]\label{e}
The number $e$ is a mathematical constant approximately equal to $2.71828$. It is the limit of $(1+\frac{1}{n})^n$ as $n$ approaches infinity. The number $e$ is the unique real number such that
\begin{align}
    \nonumber (1+\frac{1}{x})^{x} \textless e \textless (1+\frac{1}{x})^{x+1}
\end{align}
\end{definition}
\begin{lemma}\label{gp}
Given a geometric progression with first term $a \textgreater 0$ and common ratio $r \ge 2$, for every $n$, the sum of the first $n$ terms is less than the ($n+1$)-th term.
%\begin{align}
 %  \nonumber \sum_{k=1}^{n}ar^{k-1} textless ar^{n}
%\end{align}
\end{lemma}
\begin{proof}
%Suppose a geometric progression with first term $a$ and common ratio $r$ as follows:
%\begin{align}
 %   \nonumber a, ar, ar^2, ar^3, ar^4, ...
%\end{align}
%If $r \ge 2$ and $a\textgreater 0$, then the sum of first $n-1$ terms is less than the value of the $n$-th term.
%\begin{align}
 %   \nonumber \sum_{k=1}^{n-1}ar^{k-1} %\textless ar^{n-1}
%\end{align}
For every $n$, the sum of the first $n$ terms is $\sum_{k=1}^{n}ar^{k-1}$ and the ($n+1$)-th term is $ar^{n}$.
\begin{align}
    \nonumber \sum_{k=1}^{n}ar^{k-1}&=\frac{a(r^{n}-1)}{r-1}\\
    \nonumber &=\frac{ar^{n}-a}{r-1}
\end{align}
\begin{align}
    \nonumber &r\ge 2 \implies r-1 \ge 1 \implies \frac{1}{r-1} \le 1
\end{align}
Thus, 
\begin{align}
    \nonumber \sum_{k=1}^{n}ar^{k-1}\le ar^{n}-a \textless ar^{n}
\end{align} 
\end{proof}
\begin{lemma}[\textbf{union bound}]\label{union}
Suppose $\{A_i\}_{i=1}^n$ is a collection of events. Then, $Pr[\cup_{i=1}^{n}A_i]\le\sum_{i=1}^{n}Pr[A_i]$.
\end{lemma}
%\begin{lemma}\label{Markov}
%Suppose $X$ is a random variable taking non-negative values. For all $\alpha \textgreater 0$, $Pr[X\textgreater \alpha ]\le \frac{E[X]}{\alpha}$ .
%\end{lemma}
%\begin{proof}
%$E[X]=Pr[X\textgreater \alpha] \cdot E[X|X\textgreater \alpha ]+Pr[X\le \alpha]\cdot E[X|X \le \alpha]$\\
%Observe that $E[X|X\textgreater \alpha ]\textgreater \alpha$, $Pr[X\le \alpha]\ge 0$.
%Since $X$ is a random variable taking non-negative values, $E[X|X \le \alpha] \ge 0$.
%Hence $E[X]\ge Pr[X\textgreater \alpha] \cdot \alpha $. Since $\alpha \textgreater 0$, we have $Pr[X\textgreater \alpha ]\le \frac{E[X]}{\alpha}$.
%\end{proof}
%\begin{lemma}\label{Chebyshev}
%Suppose $X$ is a random variable with expectation $E[X]$. Then for all $\alpha \textgreater 0$, $Pr[X\textless E[X]-\alpha] \le \frac{var[X]}{\alpha^2}$, where $var[X]$ is the variance of $X$.
%\end{lemma}
%\begin{proof}
%Since $Pr[X\textless E[X]-\alpha]\le Pr[|X-E[X]|\textgreater \alpha]$, it suffices to prove $Pr[|X-E[X]|\textgreater \alpha] \le \frac{var[X]}{\alpha^2}$.
%Observe that $Pr[|X-E[X]|\textgreater \alpha]=Pr[(X-E[X])^2\textgreater \alpha^2]$. Since $(X-E[X])^2$ takes non-negative values and $\alpha \textgreater 0$ implies $\alpha^2 \textgreater 0$, by Lemma \ref{Markov}, we have $Pr[(X-E[X])^2\textgreater \alpha^2]\le \frac{E[(X-E[X])^2]}{\alpha^2}=\frac{var[X]}{\alpha^2}$.
%\end{proof}
\subsection {Randomized Algorithm and Analysis}
In this section, first, we will give a randomized algorithm for graph with no short cycles problem, in which construct an $n$-vertex random graph $G_{n,p}$ with no cycles of length $l$ or less. Then analyze the algorithm and show that if $n\ge 2^{l+2}$, there exists graph $G_{n,p}$ that has at least $\Omega (n^{1+\frac{1}{l-1}})$ edges. The above can be summarized by the following theorem.
\begin{theorem}
For each $l\ge 3$, and $n\ge 2^{l+2}$, there exists an $n$-vertex graph with no cycles of length $l$ or less that has at least $\Omega (n^{1+\frac{1}{l-1}})$ edges.
\end{theorem}
\subsubsection{Randomized Algorithm}
Construct an $n$-vertex random graph $G_{n,p}$ with no cycles of length $l$ or less as follows. 
\begin{enumerate}
    \item Let $V$ be the set of $n$ vertices. For each unordered pair $\{u,v\}\in \tbinom{V}{2}$, independently add an edge between $u$ and $v$ with probability $p$ ($p\ge \frac{2}{n}$).
    \item Pick one edge in every cycle that of length $l$ or less and remove it.
\end{enumerate}

\subsubsection{Analysis} 
Let $X$ be the number of edges in $G_{n,p}$. Let $Y_i$ be the number of length-$i$ cycles in $G_{n,p}$. Let $Y:=\sum_{i=3}^{l}Y_i$.
For each cycle of length $l$ or less, pick one edge and remove it.
Then we can find an $n$-vertex graph with no cycles of length $l$ or less that has at least $Z:=X-Y$ edges.By the method mentioned above of constructing graph $G_{n,p}$, we have $E[X]=\tbinom{n}{2}p$, $var[X]=\tbinom{n}{2}p(1-p)$, $E[Y_i]=\tbinom{n}{i}p^i$. By Lemma \ref{linearity}, we have $E[Y]=\sum_{i=3}^{l}E[Y_i]$.
\begin{claim}
$E[Y]\textless (np)^l$
\end{claim}
\begin{proof}
\begin{align}
    \nonumber E[Y] = E[\sum_{i=3}^{l}Y_i]=\sum_{i = 3}^{l}{\binom{n}{i} p^i}
\end{align}
Now consider $\tbinom{n}{i}$, where $i\in\{3,4,5,...,l\}$. By Lemma \ref{Stirling}, we have:
\begin{align}
   \nonumber\tbinom{n}{i}&=\frac{n!}{i!(n-i)!}\\
    \nonumber&\textless \frac{\sqrt{2\pi}n^{n+\frac{1}{2}}e^{-n}e^{\frac{1}{12n}}}{\sqrt{2\pi}i^{i+\frac{1}{2}}e^{-i}e^{\frac{1}{12i+1}}\sqrt{2\pi}(n-i)^{(n-i)+\frac{1}{2}}e^{-(n-i)}e^{\frac{1}{12(n-i)+1}}}\\
    \nonumber &=\frac{1}{\sqrt{2\pi}}\cdot e^{\frac{1}{12n}-\frac{1}{12i+1}}\cdot e^{-\frac{1}{12(n-i)-1}} \cdot n^{n+\frac{1}{2}} \cdot \frac{1}{i^{i+\frac{1}{2}}} \cdot \frac{1}{(n-i)^{n-i+\frac{1}{2}}}\\
    &=\frac{1}{\sqrt{2\pi}}\cdot e^{\frac{1}{12n}-\frac{1}{12i+1}}\cdot e^{-\frac{1}{12(n-i)-1}} \cdot \frac{n^i}{i^{i+\frac{1}{2}}} \cdot (\frac{n}{n-i})^{n-i+\frac{1}{2}}\label{a}
\end{align}
Since $n\ge 2^{l+2}$ and $l\ge i$, we have $12n \textgreater 12i+1$, which implies $\frac{1}{12n} \textless \frac{1}{12i+1}$. Then
\begin{align}
     e^{\frac{1}{12n}-\frac{1}{12i+1}} \textless 1 \label{b}
\end{align}
By Definition \ref{e}, bound $(\frac{n}{n-i})^{n-i+\frac{1}{2}}$ as follows.
\begin{align}
    \nonumber (\frac{n}{n-i})^{n-i+\frac{1}{2}}
    &= (\frac{n-i+i}{n-i})^{n-i+\frac{1}{2}}\\
    \nonumber&= (1+\frac{i}{n-i})^{n-i+\frac{1}{2}}\\
    \nonumber&= (1+\frac{1}{\frac{n-i}{i}})^{n-i+\frac{1}{2}}\\
    \nonumber&= ((1+\frac{1}{\frac{n-i}{i}})^{\frac{n-i}{i}})^{i+\frac{i}{2(n-i)}}\\
    \nonumber &\textless e^{i+\frac{i}{2(n-i)}}
\end{align}
Since $\tbinom{n}{i}=\tbinom{n}{n-i}$, 
we can assume $i\le \frac{n}{2}$. 
%the assume that $i\le \frac{n}{2}$ is reasonable. 
In order to bound $(\frac{n}{n-i})^{n-i+\frac{1}{2}}$, we have to bound $\frac{i}{2(n-i)}$
\begin{align}
   \nonumber i\le \frac{n}{2} 
   \implies n \ge 2i 
   %\implies n-i \ge i 
   \implies 2(n-i) \ge 2i \implies \frac{1}{2(n-i)} \le \frac{1}{2i} \implies  \frac{i}{2(n-i)} \le \frac{i}{2i} =\frac{1}{2}
\end{align}
Thus, 
\begin{align}
    (\frac{n}{n-i})^{n-i+\frac{1}{2}} \textless e^{i+\frac{1}{2}}\label{c}
\end{align}
By inequation \ref{a}, \ref{b} and \ref{c} we have:
\begin{align}
\nonumber \tbinom{n}{i} &\textless \frac{1}{\sqrt{2\pi}}\cdot 1\cdot e^{-\frac{1}{12(n-i)-1}} \cdot \frac{n^i}{i^{i+\frac{1}{2}}} \cdot e^{i+\frac{1}{2}}\\
\nonumber &= \frac{1}{\sqrt{2\pi}}\cdot e^{i+\frac{1}{2}-\frac{1}{12(n-i)-1}} \cdot \frac{n^i}{i^{i+\frac{1}{2}}}\\
\nonumber &\textless \frac{1}{\sqrt{2\pi}}\cdot e^{i+\frac{1}{2}} \cdot \frac{n^i}{i^{i+\frac{1}{2}}}\\
\nonumber &= \frac{1}{\sqrt{2\pi}}\cdot (\frac{e}{i})^{i+\frac{1}{2}}\cdot n^i
\end{align}
Since $i\ge 3$, we have $\frac{e}{i}\textless 1$. Thus,
\begin{align}
    \nonumber \tbinom{n}{i} \textless \frac{1}{\sqrt{2\pi}}\cdot n^i
\end{align}
Then, we have
\begin{align}
    \nonumber E[Y] &= \sum_{i = 3}^{l}{\binom{n}{i} p^i} 
    \\
    \nonumber &\textless \sum_{i=1}^{l}\frac{1}{\sqrt{2\pi}}n^ip^i\\
    \nonumber &= \frac{1}{\sqrt{2\pi}}\sum_{i=3}^{l}(np)^i
\end{align}
Since $p \ge \frac{2}{n}$, we have $np\ge 2$.
By Lemma \ref{gp}, we have:
\begin{align}
    \nonumber E[Y]& \textless   \frac{1}{\sqrt{2\pi}}\sum_{i=3}^{l}(np)^i \\
    \nonumber & \textless \frac{1}{\sqrt{2\pi}}\sum_{i=1}^{l}(np)^i \\
    \nonumber & \textless \frac{2}{\sqrt{2\pi}}(np)^l\\
    \nonumber & \textless (np)^l
\end{align}


\end{proof}
Suppose we can show the following:
\begin{enumerate}
    \item For some $\alpha \textgreater 0$, $Pr[X\textless E[X]-\alpha] \textless \frac{1}{2}$
    \item For some $\beta \textgreater 0$, $Pr[Y \textgreater \beta]\textless \frac{1}{2}$
\end{enumerate}
By Lemma \ref{union}, we have that with non-zero probability neither events happen, that is $Pr[(X\ge E[X]-\alpha)\cap (Y \le \beta)]\textgreater 0$. Then it shows that there exists an $n$-vertex graph with no cycles of length $l$ or less that has at least $E[X]-\alpha-\beta$ edges. 
Then we will show how to bound $E[X]-\alpha-\beta$.
Choose an appropriate value of $p$ such that $E[X] \ge 2E[Y]$. Since $E[X]=\tbinom{n}{2}p$ and $E[Y]\textless (np)^l$, we have to satisfy $\tbinom{n}{2}p \ge 2(np)^l$. Thus, $p\le  \sqrt[l-1]{\frac{1-\frac{1}{n}}{4n^{l-2}}}$. Since $l\ge 3$, $n\ge 2^{l+2}$ and $p\ge \frac{2}{n}$, we can set $p:=\sqrt[l-1]{\frac{1}{8n^{l-2}}}$. Check that $E[X]=\Theta (n^\frac{l}{l-1})$.% Since $E[X] \ge 2E[Y]$ and $E[Y]\le (np)^l$, we have $E[Y]=O(n^\frac{l}{l-1})$.

For $\alpha \textgreater 0$, by 
%Lemma \ref{Chebyshev}
Chebyshev's inequality
, we have:
\begin{align}
    \nonumber Pr[X\textless E[X]-\alpha]&\le Pr[|X-E[X]|\textgreater \alpha]\\ 
    \nonumber &\le \frac{var[X]}{\alpha^2}\\
    \nonumber &=\frac{\tbinom{n}{2}p(1-p)}{\alpha^2}
\end{align}
What we need is to satisfy $Pr[X\textless E[X]-\alpha] \textless \frac{1}{2}$, so $\frac{\tbinom{n}{2}p(1-p)}{\alpha^2}\le \frac{1}{2} $. Thus $\alpha \ge \sqrt{2\tbinom{n}{2}p(1-p)}$. We can set $\alpha = \sqrt{2\tbinom{n}{2}p}=\Theta(n^{\frac{l}{2l-2}})$.

For $\beta \textgreater 0$, by 
%Lemma \ref{Markov}
Markov's inequality
, we have: 
\begin{align}
    \nonumber Pr[Y \textgreater \beta] &\le \frac{E[Y]}{\beta}\\
    \nonumber & \le \frac{(np)^l}{\beta} 
\end{align}
Since we have to satisfy $Pr[Y \textgreater \beta]\textless \frac{1}{2}$, we have $\frac{(np)^l}{\beta} \le \frac{1}{2}$. Thus $\beta \ge 2(np)^l$. We can set $\beta = 2(np)^l = \Theta (n^{\frac{l}{l-1}})$.
Then,
\begin{align}
    \nonumber E[X]-\alpha-\beta = \Theta (n^\frac{l}{l-1}) - \Theta(n^{\frac{l}{2l-2}}) - \Theta (n^{\frac{l}{l-1}})=\Omega (n^{1+\frac{1}{l-1}})
\end{align}
In addition, we can bound the expectation of $Z$.
Since $E[Z]=E[X-Y]=E[X]-E[Y]$ and $E[X]\ge 2E[Y]$, we have:
\begin{align}
    \nonumber E[Z]\ge E[X]-\frac{1}{2}E[X]=\frac{1}{2}E[X]=\Omega (n^\frac{l}{l-1})
\end{align}
\subsection{Deterministic Algorithm and Analysis}
In this section, we will give a deterministic algorithm, which can construct an $n$-graph $G$ without cycles of length $l$ or less. 
Recall that $Z$ is the number of edges in the final graph.
Then we will analyze the edges of graph $G$ is at least $E[Z]$. 
Finally, we will analyze the running time of the deterministic algorithm.
\subsubsection{Deterministic Algorithm}
Denote $[i]:=\{0,1,2,...,i-1\}$ and $[0]=\emptyset$.
In graphs with no short cycles problem, for each unordered pair $\{u, v\} \in \tbinom{V}{2}$, we need to decide whether add an edge between vertex $u$ and vertex $v$. 
Totally, we have to make decision for $\tbinom{n}{2}$ random variables.
We denote the $\tbinom{n}{2}$ random variables as $R_0, R_1, ..., R_{\tbinom{n}{2}-1}$. %we use the following method to label all pairs. 
For $i\in [\tbinom{n}{2}]$, $R_i$ is considered as an edge to be selected in graph $G$.
Define $R_i$ to be $1$ if we add edge $R_i$ in graph $G$ and $0$ otherwise. 
Then, we can use $\sum_{i=0}^{\tbinom{n}{2}-1}R_i$ to denote the object value of the problem. The constraint is that there are no cycles of length $l$ or less.
For $i\in [\tbinom{n}{2}]$, let $R_{[i]}=r_{[i]}$ be a partial assignment where $r_{[i]}=1$ or $r_{[i]}=0$.
\begin{algorithm}
    \caption{Derandomization for Graphs with No Short Cycles}\label{alg}
    \KwIn{$n$ vertices: $V$} 
    \KwOut{a graph $G=(V,E)$} 
    {
        $E$=$\emptyset$;

        \For {$i=0$ to $\tbinom{n}{2}-1$}
        {
            \If{$E[Z|R_{[i]}=r_{[i]}\wedge R_i=1] \ge E[Z|R_{[i]}=r_{[i]}\wedge R_i=0]$}
            {
               $ E=E\cup R_i$
            }
        
        }
    }
\end{algorithm}
\subsubsection{Performance Guarantee}

Initially, when $i=0$, $[0]=\emptyset$, we have $E[Z|R_{[0]}=r_{[0]}]=E[Z]$.
Then we will show the relationship between values $E[Z|R_{[i]}=r_{[i]}]$ and  $E[Z|R_{[i+1]}=r_{[i+1]}]$. 
\begin{align}
    \nonumber E[Z|R_{[i]}=r_{[i]}]&=Pr[R_i=1|R_{[i]}=r_{[i]}]\cdot E[Z|R_{[i]}=r_{[i]}\wedge R_i=1]\\
    \nonumber &~~~~+Pr[R_i=0|R_{[i]}=r_{[i]}]\cdot E[Z|R_{[i]}=r_{[i]}\wedge R_i=0]
\end{align}
Thus we have either $E[Z|R_{[i]}=r_{[i]}\wedge R_i=1]$ or $E[Z|R_{[i]}=r_{[i]}\wedge R_i=0]$ is not less than  $E[Z|R_{[i]}] $. In algorithm \ref{alg}, we choose the larger one. So we have $E[Z|R_{[i+1]}=r_{[i+1]}] \ge E[Z|R_{[i]}=r_{[i]}]$ where $i\in [\tbinom{n}{2}-1]$.
Thus, the algorithm \ref{alg} can guarantee that the output graph $G$ has edges at least $E[Z]$.
\subsubsection{Time Complexity }
In Algorithm \ref{alg}, we decide whether to add edge $R_i$ in $G$ one by one. There are totally $\tbinom{n}{2}$ edges to be selected.
When we consider whether to add edge $R_i$, we have to compute two expectations, $E[Z|R_{[i]}=r_{[i]}\wedge R_i=1]$ and $E[Z|R_{[i]}=r_{[i]}\wedge R_i=0]$. Then I will show how to compute $E[Z|R_{[i]}=r_{[i]}]$.